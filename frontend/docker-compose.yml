services:
  cognito-frontend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: cognito-frontend
    image: cognito-frontend:latest

    # Network configuration (matches nginx reverse proxy upstream)
    networks:
      - cognito-network

    # Restart policy
    restart: unless-stopped

    # Health check
    healthcheck:
      test: [ "CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:3000/health" ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 5s

    # Labels for organization
    labels:
      com.cognito.service: "frontend"
      com.cognito.description: "Cognito SvelteKit Frontend"

# External network (must already exist)
networks:
  cognito-network:
    external: true
